{
  "compact": [
    {
      "name": "four_siblings_res3",
      "description": "Four sibling cells at resolution 3 compact to parent at resolution 2",
      "input": [
        "420000000000000",
        "460000000000000",
        "4a0000000000000",
        "4e0000000000000"
      ],
      "expectedOutput": [
        "480000000000000"
      ]
    },
    {
      "name": "three_of_four_siblings",
      "description": "Three sibling cells cannot be compacted (missing one sibling)",
      "input": [
        "420000000000000",
        "460000000000000",
        "4a0000000000000"
      ],
      "expectedOutput": [
        "420000000000000",
        "460000000000000",
        "4a0000000000000"
      ]
    },
    {
      "name": "five_segments_res1",
      "description": "All 5 segments at resolution 1 compact to parent at resolution 0",
      "input": [
        "500000000000000",
        "900000000000000",
        "d00000000000000",
        "1100000000000000",
        "100000000000000"
      ],
      "expectedOutput": [
        "200000000000000"
      ]
    },
    {
      "name": "twelve_res0_cells",
      "description": "All 12 resolution 0 cells compact to world cell",
      "input": [
        "200000000000000",
        "600000000000000",
        "a00000000000000",
        "e00000000000000",
        "1200000000000000",
        "1600000000000000",
        "1a00000000000000",
        "1e00000000000000",
        "2200000000000000",
        "2600000000000000",
        "2a00000000000000",
        "2e00000000000000"
      ],
      "expectedOutput": [
        "0"
      ]
    },
    {
      "name": "mixed_resolutions",
      "description": "Cells at different resolutions with no sibling relationships",
      "input": [
        "1458000000000000",
        "342a000000000000"
      ],
      "expectedOutput": [
        "1458000000000000",
        "342a000000000000"
      ]
    },
    {
      "name": "nested_compaction_res4_to_res2",
      "description": "16 cells at resolution 4 compact through res 3 to single cell at res 2",
      "input": [
        "4008000000000000",
        "4018000000000000",
        "4028000000000000",
        "4038000000000000",
        "4048000000000000",
        "4058000000000000",
        "4068000000000000",
        "4078000000000000",
        "4088000000000000",
        "4098000000000000",
        "40a8000000000000",
        "40b8000000000000",
        "40c8000000000000",
        "40d8000000000000",
        "40e8000000000000",
        "40f8000000000000"
      ],
      "expectedOutput": [
        "4080000000000000"
      ]
    },
    {
      "name": "empty_array",
      "description": "Empty input returns empty output",
      "input": [],
      "expectedOutput": []
    },
    {
      "name": "single_cell",
      "description": "Single cell remains unchanged",
      "input": [
        "7407800000000000"
      ],
      "expectedOutput": [
        "7407800000000000"
      ]
    },
    {
      "name": "duplicate_cells",
      "description": "Duplicate cells are removed",
      "input": [
        "7407800000000000",
        "7407800000000000",
        "7407800000000000"
      ],
      "expectedOutput": [
        "7407800000000000"
      ]
    },
    {
      "name": "partial_compaction",
      "description": "One complete sibling group compacts, one incomplete group does not",
      "input": [
        "420000000000000",
        "460000000000000",
        "4a0000000000000",
        "4e0000000000000",
        "520000000000000",
        "560000000000000"
      ],
      "expectedOutput": [
        "480000000000000",
        "520000000000000",
        "560000000000000"
      ]
    },
    {
      "name": "incomplete_res0_cells",
      "description": "Only 10 of 12 resolution 0 cells - should not compact to world cell",
      "input": [
        "200000000000000",
        "600000000000000",
        "a00000000000000",
        "e00000000000000",
        "1200000000000000",
        "1600000000000000",
        "1a00000000000000",
        "1e00000000000000",
        "2200000000000000",
        "2600000000000000"
      ],
      "expectedOutput": [
        "200000000000000",
        "600000000000000",
        "a00000000000000",
        "e00000000000000",
        "1200000000000000",
        "1600000000000000",
        "1a00000000000000",
        "1e00000000000000",
        "2200000000000000",
        "2600000000000000"
      ]
    },
    {
      "name": "cross_origin_no_compact",
      "description": "Cells from different origins with same segment/S should not compact",
      "input": [
        "c38000000000000",
        "1438000000000000"
      ],
      "expectedOutput": [
        "c38000000000000",
        "1438000000000000"
      ]
    }
  ],
  "uncompact": [
    {
      "name": "expand_res2_to_res3",
      "description": "Single cell at resolution 2 expands to 4 cells at resolution 3",
      "input": [
        "480000000000000"
      ],
      "targetResolution": 3,
      "expectedCount": 4
    },
    {
      "name": "expand_res2_to_res4",
      "description": "Single cell at resolution 2 expands to 16 cells at resolution 4",
      "input": [
        "480000000000000"
      ],
      "targetResolution": 4,
      "expectedCount": 16
    },
    {
      "name": "expand_res0_to_res1",
      "description": "Resolution 0 cell expands to 5 segments at resolution 1",
      "input": [
        "200000000000000"
      ],
      "targetResolution": 1,
      "expectedCount": 5
    },
    {
      "name": "expand_world_to_res0",
      "description": "World cell expands to 12 resolution 0 cells",
      "input": [
        "0"
      ],
      "targetResolution": 0,
      "expectedCount": 12
    },
    {
      "name": "mixed_input_to_res5",
      "description": "Cells at resolutions 3 and 4 both expand to resolution 5",
      "input": [
        "24a0000000000000",
        "3858000000000000"
      ],
      "targetResolution": 5,
      "expectedCount": 20
    },
    {
      "name": "already_at_target",
      "description": "Cell already at target resolution remains unchanged",
      "input": [
        "540a800000000000"
      ],
      "targetResolution": 6,
      "expectedCount": 1
    },
    {
      "name": "empty_array",
      "description": "Empty input returns empty output",
      "input": [],
      "targetResolution": 5,
      "expectedCount": 0
    },
    {
      "name": "uncompact_to_lower_resolution",
      "description": "Attempting to uncompact to lower resolution should throw error",
      "input": [
        "403e000000000000"
      ],
      "targetResolution": 3,
      "expectedError": true
    }
  ],
  "roundTrip": [
    {
      "name": "roundtrip_basic",
      "description": "Compact then uncompact should maintain cell coverage",
      "initialCells": [
        "940800000000000",
        "941800000000000",
        "942800000000000",
        "943800000000000",
        "944800000000000",
        "945800000000000",
        "946800000000000",
        "947800000000000",
        "948800000000000",
        "949800000000000",
        "94a800000000000",
        "94b800000000000",
        "94c800000000000",
        "94d800000000000",
        "94e800000000000",
        "94f800000000000",
        "950800000000000",
        "951800000000000",
        "952800000000000",
        "953800000000000",
        "954800000000000",
        "955800000000000",
        "956800000000000",
        "957800000000000",
        "958800000000000",
        "959800000000000",
        "95a800000000000",
        "95b800000000000",
        "95c800000000000",
        "95d800000000000",
        "95e800000000000",
        "95f800000000000",
        "960800000000000",
        "961800000000000",
        "962800000000000",
        "963800000000000",
        "964800000000000",
        "965800000000000",
        "966800000000000",
        "967800000000000",
        "968800000000000",
        "969800000000000",
        "96a800000000000",
        "96b800000000000",
        "96c800000000000",
        "96d800000000000",
        "96e800000000000",
        "96f800000000000",
        "970800000000000",
        "971800000000000",
        "972800000000000",
        "973800000000000",
        "974800000000000",
        "975800000000000",
        "976800000000000",
        "977800000000000",
        "978800000000000",
        "979800000000000",
        "97a800000000000",
        "97b800000000000",
        "97c800000000000",
        "97d800000000000",
        "97e800000000000",
        "97f800000000000"
      ],
      "afterCompact": [
        "960000000000000"
      ],
      "targetResolution": 6,
      "afterUncompact": [
        "940800000000000",
        "941800000000000",
        "942800000000000",
        "943800000000000",
        "944800000000000",
        "945800000000000",
        "946800000000000",
        "947800000000000",
        "948800000000000",
        "949800000000000",
        "94a800000000000",
        "94b800000000000",
        "94c800000000000",
        "94d800000000000",
        "94e800000000000",
        "94f800000000000",
        "950800000000000",
        "951800000000000",
        "952800000000000",
        "953800000000000",
        "954800000000000",
        "955800000000000",
        "956800000000000",
        "957800000000000",
        "958800000000000",
        "959800000000000",
        "95a800000000000",
        "95b800000000000",
        "95c800000000000",
        "95d800000000000",
        "95e800000000000",
        "95f800000000000",
        "960800000000000",
        "961800000000000",
        "962800000000000",
        "963800000000000",
        "964800000000000",
        "965800000000000",
        "966800000000000",
        "967800000000000",
        "968800000000000",
        "969800000000000",
        "96a800000000000",
        "96b800000000000",
        "96c800000000000",
        "96d800000000000",
        "96e800000000000",
        "96f800000000000",
        "970800000000000",
        "971800000000000",
        "972800000000000",
        "973800000000000",
        "974800000000000",
        "975800000000000",
        "976800000000000",
        "977800000000000",
        "978800000000000",
        "979800000000000",
        "97a800000000000",
        "97b800000000000",
        "97c800000000000",
        "97d800000000000",
        "97e800000000000",
        "97f800000000000"
      ]
    },
    {
      "name": "roundtrip_mixed_resolutions",
      "description": "Mixed resolutions maintain coverage through compact/uncompact cycle",
      "initialCells": [
        "480000000000000",
        "2428000000000000",
        "3816000000000000"
      ],
      "afterCompact": [
        "480000000000000",
        "2428000000000000",
        "3816000000000000"
      ],
      "targetResolution": 5,
      "expectedCount": 69
    },
    {
      "name": "roundtrip_cell_coverage",
      "description": "Verify cell count is preserved through operations",
      "initialCells": [
        "44a0200000000000",
        "44a0600000000000",
        "44a0a00000000000",
        "44a0e00000000000",
        "44a1200000000000",
        "44a1600000000000",
        "44a1a00000000000",
        "44a1e00000000000",
        "44a2200000000000",
        "44a2600000000000",
        "44a2a00000000000",
        "44a2e00000000000",
        "44a3200000000000",
        "44a3600000000000",
        "44a3a00000000000",
        "44a3e00000000000",
        "44a4200000000000",
        "44a4600000000000",
        "44a4a00000000000",
        "44a4e00000000000",
        "44a5200000000000",
        "44a5600000000000",
        "44a5a00000000000",
        "44a5e00000000000",
        "44a6200000000000",
        "44a6600000000000",
        "44a6a00000000000",
        "44a6e00000000000",
        "44a7200000000000",
        "44a7600000000000",
        "44a7a00000000000",
        "44a7e00000000000",
        "44a8200000000000",
        "44a8600000000000",
        "44a8a00000000000",
        "44a8e00000000000",
        "44a9200000000000",
        "44a9600000000000",
        "44a9a00000000000",
        "44a9e00000000000",
        "44aa200000000000",
        "44aa600000000000",
        "44aaa00000000000",
        "44aae00000000000",
        "44ab200000000000",
        "44ab600000000000",
        "44aba00000000000",
        "44abe00000000000",
        "44ac200000000000",
        "44ac600000000000",
        "44aca00000000000",
        "44ace00000000000",
        "44ad200000000000",
        "44ad600000000000",
        "44ada00000000000",
        "44ade00000000000",
        "44ae200000000000",
        "44ae600000000000",
        "44aea00000000000",
        "44aee00000000000",
        "44af200000000000",
        "44af600000000000",
        "44afa00000000000",
        "44afe00000000000"
      ],
      "initialCount": 64,
      "afterCompact": [
        "44a8000000000000"
      ],
      "targetResolution": 7,
      "expectedFinalCount": 64
    }
  ]
}